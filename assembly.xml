<assembly
	xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
	<id>bin</id>
	<formats>
		<format>jar</format>
	</formats>
	<includeBaseDirectory>false</includeBaseDirectory>
	<dependencySets>
		<dependencySet>
			<outputDirectory>examples/distribution</outputDirectory>
			<useTransitiveDependencies>false</useTransitiveDependencies>
			<unpack>false</unpack>
			<includes>
				<include>${project.groupId}:examples-regexprofiling</include>
				<include>${project.groupId}:examples-defaulterdebugging</include>
			</includes>
		</dependencySet>
		<dependencySet>
			<outputDirectory>agent-distribution</outputDirectory>
			<unpack>false</unpack>
			<useTransitiveDependencies>false</useTransitiveDependencies>
			<includes>
				<include>${project.groupId}:jumbune-remoting:jar:agent</include>
			</includes>
		</dependencySet>

		<dependencySet>
			<outputDirectory>/</outputDirectory>
			<unpack>true</unpack>
			<unpackOptions>
				<excludes>
				   <exclude>*/DEPENDENCIES</exclude>
				   <exclude>*/LICENSE</exclude>
				   <exclude>*/NOTICE</exclude>
				   <exclude>*/MANIFEST.MF</exclude>
				   <exclude>*/maven/</exclude>
				</excludes>
			</unpackOptions>
			<useTransitiveDependencies>false</useTransitiveDependencies>
			<includes>
				<include>${project.groupId}:jumbune-deploy</include>
				<include>com.google.code.gson:gson:jar:2.2.4</include>
				<include>com.jcraft:jsch:jar:0.1.51</include>
				<include>org.apache.logging.log4j:log4j-api:jar:2.1</include>
				<include>org.apache.logging.log4j:log4j-core:jar:2.1</include>
				<include>commons-cli:commons-cli:jar:1.4</include>
			</includes>
		</dependencySet>

		<dependencySet>
			<outputDirectory>modules</outputDirectory>
			<unpack>false</unpack>
			<useTransitiveDependencies>false</useTransitiveDependencies>
			<includes>
				<include>${project.groupId}:jumbune-web</include>
				<include>${project.groupId}:jumbune-exec</include>
				<include>${project.groupId}:jumbune-datavalidation</include>
				<include>${project.groupId}:jumbune-debugger</include>
				<include>${project.groupId}:jumbune-cluster-analysis</include>
			</includes>

		</dependencySet>

		<dependencySet>
			<outputDirectory>lib</outputDirectory>
			<unpack>false</unpack>
			<useTransitiveDependencies>false</useTransitiveDependencies>
			<includes>
				<include>org.ow2.asm:asm:jar:4.0</include>
				<include>org.ow2.asm:asm-tree:jar:4.0</include>
				<include>com.google.code.gson:gson:jar:2.2.4</include>
				<include>com.google.guava:guava:jar:11.0.2</include>
				<include>com.jcraft:jsch:jar:0.1.51</include>
				<include>com.sun.xml:relaxngDatatype:jar:1.0</include>
				<include>com.sun.xsom:xsom:jar:20140925</include>
				<include>commons-cli:commons-cli:jar:1.4</include>
				<include>commons-configuration:commons-configuration:jar:1.6:</include>
				<include>commons-io:commons-io:jar:2.4</include>
				<include>commons-lang:commons-lang:jar:2.4:</include>
				<include>commons-logging:commons-logging:jar:1.2:</include>
				<include>org.apache.commons:commons-math3:jar:3.0</include>
				<include>org.apache.commons:commons-io:jar:1.3.2</include>
				<include>${project.groupId}:jumbune-common</include>
				<include>${project.groupId}:jumbune-utils</include>
				<include>${project.groupId}:jumbune-remoting:jar:${project.version}::</include>
				<include>${project.groupId}:jumbune-remoting-common:jar:${project.version}::</include>
				<include>${project.groupId}:jumbune-remoting-jsch:jar:${project.version}::</include>
				<include>io.netty:netty-handler:jar:4.0.20.Final</include>
				<include>io.netty:netty-buffer:jar:4.0.20.Final</include>
				<include>io.netty:netty-common:jar:4.0.20.Final</include>
				<include>io.netty:netty-codec:jar:4.0.20.Final</include>
				<include>io.netty:netty-transport:jar:4.0.20.Final</include>
				<include>org.apache.logging.log4j:log4j-api:jar:2.1</include>
				<include>org.apache.logging.log4j:log4j-core:jar:2.1</include>
				<include>org.apache.poi:poi:jar:3.8:</include>
				<include>org.apache.zookeeper:zookeeper:jar:3.4.6</include>
				<include>org.codehaus.jackson:jackson-mapper-asl:jar:1.8.8:</include>
				<include>org.codehaus.jackson:jackson-core-asl:jar:1.8.8:</include>
				<include>org.eclipse.jetty:jetty-runner:jar:9.3.1.v20150714</include>
				<include>org.slf4j:slf4j-api:jar:1.7.5</include>
				<include>org.slf4j:slf4j-simple:jar:1.6.1</include>
				<include>xmlbeans:xbean:jar:2.2.0</include>
				<include>xmlbeans:xbean:jar:2.2.0</include>
			</includes>

		</dependencySet>



	</dependencySets>
	<fileSets>
		<fileSet>
			<outputDirectory>bin</outputDirectory>
			<fileMode>0777</fileMode>
			<directoryMode>0777</directoryMode>
            		<excludes>
				<exclude>${project.basedir}/../bin/agent/</exclude>
				<exclude>${project.basedir}/../bin/agent/startAgent</exclude>
			</excludes>
			<directory>${project.basedir}/../bin</directory>
		</fileSet>
		<fileSet>
			<outputDirectory>resources</outputDirectory>
			<fileMode>0777</fileMode>
			<directoryMode>0777</directoryMode>
			<directory>${project.basedir}/../common/src/main/resources</directory>
		</fileSet>
		<fileSet>
			<outputDirectory>resources</outputDirectory>
			<fileMode>0777</fileMode>
			<directoryMode>0777</directoryMode>
			<directory>${project.basedir}/../web/src/main/resources</directory>
		</fileSet>
		<fileSet>
			<directory>${project.basedir}/../examples/src/main/resources/source</directory>
			<outputDirectory>examples/src/</outputDirectory>
		</fileSet>
		<fileSet>
            <directory>${project.basedir}/../examples/src/main/resources/inputresources</directory>
            <outputDirectory>examples/resources/</outputDirectory>
        </fileSet>
		<fileSet>
			<outputDirectory>agent-distribution/bin</outputDirectory>
			<fileMode>0777</fileMode>
			<directoryMode>0777</directoryMode>
			<directory>${project.basedir}/../bin/agent</directory>
	</fileSet>
	</fileSets>
	<files>
		<file>
			<outputDirectory>examples/</outputDirectory>
			<source>${project.basedir}/../examples/src/main/resources/readme.txt</source>
		</file>
		 <file>
		      <source>${project.basedir}/../LICENSE.txt</source>
		      <outputDirectory>/META-INF/</outputDirectory>
		</file>
		 <file>
		      <source>${project.basedir}/../NOTICE.txt</source>
		      <outputDirectory>/META-INF/</outputDirectory>
		</file>
		<file>
			<outputDirectory>/</outputDirectory>
			<source>${project.basedir}/../common/src/main/resources/jumbune.version</source>
		</file>
	</files>
</assembly>
