<assembly
	xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
	<id>agent</id>
	<formats>
		<format>jar</format>
	</formats>
	<includeBaseDirectory>false</includeBaseDirectory>

	<fileSets>
		<fileSet>
			<directory>src/main/java/org/jumbune/remoting/jmx/server</directory>
			<outputDirectory>lib</outputDirectory>
			<includes>
				<include>jumbune*jmx*.jar</include>
			</includes>
			<lineEnding>unix</lineEnding>
			<fileMode>0777</fileMode>
		</fileSet>
	</fileSets>

	<dependencySets>
		<dependencySet>
			<outputDirectory>/</outputDirectory>
			<unpack>true</unpack>
			<useTransitiveDependencies>false</useTransitiveDependencies>
			<includes>
			   <include>org.jumbune:jumbune-remoting-jsch:jar:1.6</include>
			   <include>org.jumbune:jumbune-remoting-common:jar:1.6</include>
				<include>org.apache.logging.log4j:log4j-api:jar:2.8.2</include>
				<include>org.apache.logging.log4j:log4j-core:jar:2.8.2</include>
				<include>io.netty:netty-handler:jar:4.1.43.Final</include>
				<include>io.netty:netty-buffer:jar:4.1.43.Final</include>
				<include>io.netty:netty-common:jar:4.1.43.Final</include>
				<include>io.netty:netty-codec:jar:4.1.43.Final</include>
				<include>io.netty:netty-transport:jar:4.1.43.Final</include>
				<include>com.jcraft:jsch:jar:0.1.54</include>
				<include>org.apache.zookeeper:zookeeper:jar:3.4.14</include>
				<include>org.slf4j:slf4j-api:jar:1.7.5</include>
				<include>org.slf4j:slf4j-log4j12:jar:1.7.5</include>
				<include>org.slf4j:slf4j-simple</include>
				<include>org.apache.curator:curator-recipes:jar:2.13.0</include>
				<include>org.apache.curator:curator-client:jar:2.13.0</include>
				<include>org.apache.curator:curator-framework:jar:2.13.0</include>
				<include>com.google.protobuf:protobuf-java</include>
				<include>com.google.code.gson:gson</include>
				<include>com.google.guava:guava:jar:20.0</include>
				<include>commons-cli:commons-cli:jar:1.4</include>
			</includes>
			<useProjectArtifact>true</useProjectArtifact>
		</dependencySet>
		<dependencySet>
			<useTransitiveDependencies>false</useTransitiveDependencies>
			<unpack>true</unpack>

			<unpackOptions>
				<includes>
					<include>org/jumbune/remoting/writable**/*</include>
					<!-- <include>org/jumbune/remoting/server**/*</include>-->
					<include>org/jumbune/remoting/server**/**</include>
					<include>org/jumbune/remoting/jmx**/**</include>
					<include>log4j2.xml</include>
					<include>distribution.properties</include>
					<include>ha_conf.properties</include>
				</includes>
			</unpackOptions>
		</dependencySet>
		<dependencySet>
			<outputDirectory>/</outputDirectory>
			<unpack>true</unpack>
			<useTransitiveDependencies>false</useTransitiveDependencies>
			<includes>
				<include>${project.groupId}:jumbune-utils</include>

			</includes>
		</dependencySet>
	</dependencySets>
</assembly>
